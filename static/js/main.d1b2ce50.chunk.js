(this.webpackJsonpmydraw=this.webpackJsonpmydraw||[]).push([[0],[,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(0);function o(e){return Object(r.a)(Object(r.a)({},e),{},{__TYPE__:"DrawElementConfig"})}function c(e){return"object"===typeof e&&null!=e&&"DrawElementConfig"===Reflect.get(e,"__TYPE__")}},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){var r={"./Draw.element.ts":22,"./Line.element.ts":18,"./Rect.element.ts":19};function o(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=c,e.exports=o,o.id=17},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return o}));var r=n(3),o=Object(r.a)({name:"Line",draw:function(e,t){t.lineWidth=4,t.strokeStyle=e.color,t.beginPath(),t.moveTo(e.x0,e.y0),t.lineTo(e.x1,e.y1),t.stroke()},onCreate:function(e,t){return{color:"#000000",x0:e,y0:t,x1:e,y1:t}},onDrawing:function(e,t,n){return{x1:n.x1+e,y1:n.y1+t}}})},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return o}));var r=n(3),o=Object(r.a)({name:"Rect",draw:function(e,t){t.lineWidth=4,t.strokeStyle=e.strokeColor,t.fillStyle=e.backgroundColor,t.beginPath(),t.rect(e.x0,e.y0,e.x1-e.x0,e.y1-e.y0),t.fill(),t.stroke()},onCreate:function(e,t){return{backgroundColor:"pink",strokeColor:"black",x0:e,y0:t,x1:e,y1:t}},onDrawing:function(e,t,n){return{x1:n.x1+e,y1:n.y1+t}}})},,function(e,t,n){"use strict";n.r(t);var r,o=n(1),c=n.n(o),i=n(9),a=n.n(i),u=(n(15),n(4)),l=n(0),f=(n(16),n(3));function s(){return(e=n(17),e.keys().map(e)).map((function(e){return function(e){if("object"!==typeof e||null==e||!Object(f.b)(Reflect.get(e,"config")))throw new TypeError("*.element.ts files must be a module exporting `config` object")}(e),e.config}));var e}var d=0;var p=n(2),m=null!=r?r:r=s().reduce((function(e,t){return e[t.name]=t,e}),{}),b=Object.keys(m),v={drawElements:[],draftElement:null,activeTool:b[0]};function j(e,t){switch(t.type){case"createDraftElement":return Object(l.a)(Object(l.a)({},e),{},{draftElement:t.element});case"updateDraftElement":return e.draftElement?Object(l.a)(Object(l.a)({},e),{},{draftElement:Object(l.a)(Object(l.a)({},e.draftElement),{},{props:Object(l.a)(Object(l.a)({},e.draftElement.props),t.props)})}):e;case"saveDraftElement":return e.draftElement?Object(l.a)(Object(l.a)({},e),{},{drawElements:e.drawElements.concat(e.draftElement),draftElement:null}):e;case"setActiveTool":return Object(l.a)(Object(l.a)({},e),{},{activeTool:t.tool})}}var w=function(){var e=Object(o.useRef)(null),t=Object(o.useReducer)(j,v),n=Object(u.a)(t,2),r=n[0],c=n[1];Object(o.useEffect)((function(){function t(){var t,n=e.current;if(n){var r=window.devicePixelRatio||1;n.width=window.innerWidth*r,n.height=window.innerHeight*r,n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",null===(t=n.getContext("2d"))||void 0===t||t.scale(r,r)}}return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}}),[]);var i=Object(o.useRef)(r.draftElement);return i.current=r.draftElement,Object(o.useEffect)((function(){var e=m[r.activeTool],t=0,n=0;function o(r){null!=i.current&&(c({type:"updateDraftElement",props:e.onDrawing(r.clientX-t,r.clientY-n,i.current.props)}),t=r.clientX,n=r.clientY)}function a(i){1===i.buttons&&(t=i.clientX,n=i.clientY,c({type:"createDraftElement",element:{id:(d++,(Date.now()+d).toString(32)),type:r.activeTool,props:e.onCreate(i.clientX,i.clientY)}}),document.addEventListener("pointermove",o))}function u(){c({type:"saveDraftElement"}),document.removeEventListener("pointermove",o)}return document.addEventListener("pointerdown",a),document.addEventListener("pointerup",u),function(){document.removeEventListener("pointerdown",a),document.removeEventListener("pointerup",u)}}),[r.activeTool]),Object(o.useEffect)((function(){var t=e.current;if(null!=t){var n=t.getContext("2d");null!=n&&(n.clearRect(0,0,t.width,t.height),r.drawElements.forEach((function(e){m[e.type].draw(e.props,n)})),r.draftElement&&m[r.draftElement.type].draw(r.draftElement.props,n))}}),[r.drawElements,r.draftElement]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("div",{className:"App__toolbar",onPointerDown:function(e){return e.stopPropagation()},children:b.map((function(e){return Object(p.jsx)("button",{disabled:r.activeTool===e,onClick:function(){return c({type:"setActiveTool",tool:e})},children:e},e)}))}),Object(p.jsx)("canvas",{className:"App__canvas",ref:e})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),c(e),i(e)}))};a.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),E()},function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return u}));var r=n(7),o=n(4),c=n(3),i=n(10);function a(e,t,n){var c=function(e){if(!e.length)return"";var t=e.reduce((function(e,t,n,r){var c=Object(o.a)(t,2),i=c[0],a=c[1],u=Object(o.a)(r[(n+1)%r.length],2),l=u[0],f=u[1];return e.push(i,a,(i+l)/2,(a+f)/2),e}),["M"].concat(Object(r.a)(e[0]),["Q"]));return t.push("Z"),t.join(" ")}(Object(i.a)(e));n.fillStyle=t,n.fill(new Path2D(c))}var u=Object(c.a)({name:"Draw",draw:function(e,t){0!==e.points.length&&a(e.points,e.color,t)},onCreate:function(e,t){return{color:"black",points:[[e,t]]}},onDrawing:function(e,t,n){var c=Object(o.a)(n.points[n.points.length-1],2),i=c[0],a=c[1];return{points:[].concat(Object(r.a)(n.points),[[i+e,a+t]])}}})}],[[21,1,2]]]);
//# sourceMappingURL=main.d1b2ce50.chunk.js.map